#include<stdio.h>
#include<string.h>

int max(int a, int b);
void findLCS(char *s1, char *s2, int m, int n);

int max(int a, int b) {
  return (a > b)? a : b;
}

void findLCS(char *s1, char *s2, int m, int n) {
  int L[m + 1][n + 1];
  int i, j, result;

  /*
   * find the length of the LCS
   */
  for(i = 0; i <= m; i++) {

    for(j = 0; j <= n; j++) {

      if( m == 0 || n == 0) {

        L[m][n] = 0;

      } else if(s1[m - 1] == s2[n - 1]) {

        L[m][n] = L[m - 1][n - 1] + 1;

      } else {

        L[m][n] = max(L[m - 1][n], L[m][n - 1]);
      }
    }
  }

  /*
   * Print LCS
   */
  result = L[m][n];

  char LCS[result+1];

  /*
   * setting the NULL character at the end of LCS character arras2.
   * as we know in C programming language, NULL character is used
   * to denote the end of a string
   */
  LCS[result] = '\0';

  while(m > 0) {
      while (n > 0){
        if(s1[m - 1] == s2[n - 1]){
            LCS[result - 1] = s1[m - 1];
            result--;
            m--;
            n--;
        } else if(L[m - 1][n] > L[m][n - 1]) {
            m--;
        } else {
            n--;
        }
    }
}

  //print result
  printf("Length of the LCS: %d\n", L[m][n]-1);
  printf("LCS: %s\n", LCS);
}

int main(void) {
  char s1[1001], s2[1001];
    int a, b;
    s1[a] = '\0';
    s2[b] = '\0';
    int n=0, m=0, i=0, j=0, error_s1= 0, error_s2=0, num=0;
     while (num == 0){
        printf("To Compute LCS enter two sequences\n");
        printf("Enter the first sequence: ");
        fgets(s1,1001, stdin);        
        for (i = 0; i < strlen(s1)-1; i++){
            if (isdigit(s1[i]) == 0){
                error_s1 = 1;
                break;
            }else{
                error_s1 = 0;
            }
        }
        if (error_s1 == 1){
            printf("\nError! Non-digit character detected!\n\n");
            num = 0;
            continue;
        }
        printf("Enter the second sequence: ");
        fgets(s2,1001,stdin);   

        for (j = 0; j < strlen(s2)-1; j++){
            if (isdigit(s2[j]) == 0){
                error_s2 = 1;
                break;
            }else{
                error_s2 = 0;
            }
        }
        if (error_s2 == 1){
            printf("\nError! Non-digit character detected!\n\n");
            num = 0;
            continue;
        }
        num = 1;
    }
    m = strlen(s1);
    n = strlen(s2);
    printf("\n# Two input sequences (length = %d, %d) are:\n", m-1, n-1);
    printf("%s", s1);
    printf("%s", s2);   
    findLCS(s1, s2, m, n);

  return 0;
}